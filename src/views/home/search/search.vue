<template>    <div>        <!--        //搜索-->        <form>            <van-search                    v-model="seaTxt"                    background="#3194ff"                    show-action                    maxlength="50"                    @input="searchlx"                    placeholder="请输入搜索关键词"                    @search="seaClick"                    @cancel="$router.back()"            />        </form>        <div class="conent">            <!--        历史记录-->            <div class="history" v-if="!seaTxt">                <div class="histitle">                    <span>历史记录</span>                    <van-icon name="delete" class="hisicon" @click="hisDel"/>                </div>                <van-row class="hiscont">                    <van-col class="hisspan" span="12" v-for="(item,index) in hisList" :key="index"                             @click.stop="seaClick(item)"><span>{{item}}</span><span                            style="margin-left: 20px;display: inline-block" @click.stop="redg(index)">X</span>                    </van-col>                </van-row>            </div>            <!--        联想词-->            <div class="assword" v-else>                <van-cell icon="search" v-for="(item,index) in lxList" @click="seaClick(item.txt)"                          :key="index">                    <template slot="title">                        <div v-html="item.span"></div>                    </template>                </van-cell>            </div>        </div>    </div></template><script>  import { assword, hisdel } from '@/api/search.js'  import fd from '@/utilis/fandou.js'  import { getHis, removeHis, setHis } from '@/utilis/token.js'  export default {    name: 'search',    data () {      return {        seaTxt: '',        lxList: [],        hisList: getHis() || [],        timeId: null      }    },    methods: {      //点击历史记录的删除      redg (index) {        this.hisList.splice(index, 1)        setHis(this.hisList)      },      //搜索事件      seaClick (val) {        this.hisList.unshift(val)        let set = new Set(this.hisList)        this.hisList = [...set]        setHis(this.hisList)        this.$router.push(`/search/${val}`)      },      //搜索联想      searchlx () {        fd(async () => {          if (this.seaTxt == '') {            this.lxList = []            return          }          let msg = await assword({ q: this.seaTxt })          this.lxList = msg.data.options.map(item => {            return {              txt: item,              span: item.toLocaleLowerCase().replace(this.seaTxt.toLocaleLowerCase(), `<span style="color: skyblue">${this.seaTxt}</span>`)            }          })        }, 500)      },      //删除历史记录      async hisDel () {        await hisdel()        this.hisList = []        removeHis()      }    },    created () {    }  }</script><style scoped lang="less">    .van-search__action {        color: #fff;    }    .conent {        background: #fff;        .history {            .histitle {                display: flex;                justify-content: space-between;                align-items: center;                height: 44px;                padding: 0 10px;                font-size: 14px;                .hisicon {                    font-size: 22px;                }            }        }        .hiscont {            .hisspan {                display: flex;                align-items: center;                justify-content: center;                height: 44px;                font-size: 16px;                border-top: .5px solid #e8e8e8;                -webkit-line-clamp: 2;                display: -webkit-box;                -webkit-box-orient: vertical;                overflow: hidden;                text-overflow: ellipsis;                &:nth-child(odd) {                    border-right: .5px solid #e8e8e8;                }            }        }    }</style>